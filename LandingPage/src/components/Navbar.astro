---
import Container from './ui/Container.astro';

const navLinks = [
  { href: '#inicio', label: 'Inicio' },
  { href: '#nosotros', label: 'Nosotros' },
  { href: '#actividades', label: 'Actividades' },
  { href: '#directiva', label: 'Directiva' },
  { href: '#unete', label: 'Únete' },
];
---

<header class="fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-neutral-200">
  <Container>
    <nav class="flex items-center justify-between h-16 lg:h-20">
      <!-- Logo -->
      <a href="#inicio" class="flex items-center gap-3 group">
        <img 
          src="/csociety_logo.webp" 
          alt="IEEE Computer Society PUCV"
          width="48"
          height="48" 
          class="h-10 lg:h-12 w-auto transition-transform group-hover:scale-105"
        />
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center gap-8">
        {navLinks.map(link => (
          <a 
            href={link.href} 
            class="text-neutral-600 hover:text-ieee-orange-text font-medium transition-colors"
          >
            {link.label}
          </a>
        ))}
        <a 
          href="#unete" 
          class="bg-ieee-orange text-white px-5 py-2.5 rounded-xl font-semibold hover:bg-ieee-orange-dark transition-colors shadow-md"
        >
          Únete
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button 
        id="mobile-menu-btn"
        class="lg:hidden p-2 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors"
        aria-label="Abrir menú"
        aria-expanded="false"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path id="menu-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </nav>
  </Container>

  <!-- Mobile Menu -->
  <div 
    id="mobile-menu" 
    class="lg:hidden hidden bg-white border-t border-neutral-200"
  >
    <Container>
      <div class="py-4 space-y-1">
        {navLinks.map(link => (
          <a 
            href={link.href} 
            class="block py-3 px-4 text-neutral-700 hover:bg-neutral-50 hover:text-ieee-orange rounded-lg font-medium transition-colors mobile-link"
          >
            {link.label}
          </a>
        ))}
        <div class="pt-4 mt-4 border-t border-neutral-200">
          <a 
            href="#unete" 
            class="block text-center bg-ieee-orange text-white py-3 rounded-xl font-semibold hover:bg-ieee-orange-dark transition-colors mobile-link"
          >
            Únete al Capítulo
          </a>
        </div>
      </div>
    </Container>
  </div>
</header>

<!-- Spacer to prevent content from going under fixed navbar -->
<div class="h-16 lg:h-20"></div>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const mobileLinks = document.querySelectorAll('.mobile-link');

  function toggleMenu() {
    const isOpen = mobileMenu?.classList.toggle('hidden') === false;
    menuBtn?.setAttribute('aria-expanded', String(isOpen));
    
    if (menuIcon) {
      menuIcon.setAttribute('d', isOpen 
        ? 'M6 18L18 6M6 6l12 12' 
        : 'M4 6h16M4 12h16M4 18h16'
      );
    }
  }

  function closeMenu() {
    mobileMenu?.classList.add('hidden');
    menuBtn?.setAttribute('aria-expanded', 'false');
    if (menuIcon) {
      menuIcon.setAttribute('d', 'M4 6h16M4 12h16M4 18h16');
    }
  }

  menuBtn?.addEventListener('click', toggleMenu);
  mobileLinks.forEach(link => link.addEventListener('click', closeMenu));
</script>
